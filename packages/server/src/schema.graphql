type User {
  id: ID! @id
  email: String! @unique
  password: String! @private
  roles: [String!]!
  firstName: String!
  lastName: String!
  createdAt: DateTime! @timestamp(operations: [CREATE])
  updatedAt: DateTime @timestamp(operations: [UPDATE])
}

type Course @auth(rules: [{ operations: [CREATE], roles: ["admin"] }]) {
  id: ID! @id
  title: String!
  description: String
  url: String! @unique
  price: CoursePrice @relationship(type: "HAS_PRICE", direction: OUT)
  platform: CoursePlatform @relationship(type: "OWNED_BY_PLATFORM", direction: OUT)
  languages: [CourseLanguage!]! @relationship(type: "TRANSLATED_INTO", direction: OUT)
  createdAt: DateTime! @timestamp(operations: [CREATE])
  updatedAt: DateTime @timestamp(operations: [UPDATE])
}

type CoursePrice {
  course: Course @relationship(type: "HAS_PRICE", direction: IN)
  price: Int
  currencyCodeISO: String
}

type CoursePlatform {
  id: ID! @id
  name: String! @unique
  url: String! @unique
  logoUrl: String
  courses: [Course!]! @relationship(type: "OWNED_BY_PLATFORM", direction: IN)
  createdAt: DateTime! @timestamp(operations: [CREATE])
  updatedAt: DateTime @timestamp(operations: [UPDATE])
}

type CourseLanguage {
  name: String! @unique
  countryCodeISO: String! @unique
  courses: [Course!]! @relationship(type: "TRANSLATED_INTO", direction: IN)
}

# type SkillTag {
#   id: ID! @id
# }
